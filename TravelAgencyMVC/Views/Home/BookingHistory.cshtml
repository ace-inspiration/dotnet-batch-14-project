@* @model BookingHistoryViewModel *@

@* <section id="hero_2" class="background-image" data-background="url(../img/slides/beach1.jpg)"> *@
@*     <div class="opacity-mask" data-opacity-mask="rgba(0, 0, 0, 0.6)"> *@
@*         <div class="intro_title"> *@
@*             <h1>Place your order</h1> *@
@*             <div class="bs-wizard row"> *@

@*                 <div class="col-4 bs-wizard-step active"> *@
@*                     <div class="text-center bs-wizard-stepnum">Booking History</div> *@
@*                     <div class="progress"> *@
@*                         <div class="progress-bar"></div> *@
@*                     </div> *@
@*                     <a href="cart.html" class="bs-wizard-dot"></a> *@
@*                 </div> *@

@*                 <div class="col-4 bs-wizard-step disabled"> *@
@*                     <div class="text-center bs-wizard-stepnum">Your details</div> *@
@*                     <div class="progress"> *@
@*                         <div class="progress-bar"></div> *@
@*                     </div> *@
@*                     <a href="payment.html" class="bs-wizard-dot"></a> *@
@*                 </div> *@

@*                 <div class="col-4 bs-wizard-step disabled"> *@
@*                     <div class="text-center bs-wizard-stepnum">Finish!</div> *@
@*                     <div class="progress"> *@
@*                         <div class="progress-bar"></div> *@
@*                     </div> *@
@*                     <a href="confirmation.html" class="bs-wizard-dot"></a> *@
@*                 </div> *@

@*             </div> *@
@*             <!-- End bs-wizard --> *@
@*         </div> *@
@*         <!-- End intro-title --> *@
@*     </div> *@
@*     <!-- End opacity-mask--> *@
@* </section> *@
@* <!-- End Section hero_2 --> *@

@* <main> *@
@*     <div id="position"> *@
@*         <div class="container"> *@
@*             <ul> *@
@*                 <li> *@
@*                     <a href="#">Home</a> *@
@*                 </li> *@
@*                 <li> *@
@*                     <a href="#">Category</a> *@
@*                 </li> *@
@*                 <li>Page active</li> *@
@*             </ul> *@
@*         </div> *@
@*     </div> *@
@*     <!-- End position --> *@

@*     <div class="container pt-3 pt-5"> *@
@*         <div class="row"> *@
@*             <div> *@
@*                 <table class="table table-striped cart-list add_bottom_30"> *@
@*                     <thead> *@
@*                         <tr> *@
@*                             <th>Travel Package Title</th> *@
@*                             <th>Image</th> *@
                          
@*                             <th>No. of Travellers</th> *@
@*                             <th>Booking Date</th> *@
@*                             <th>Amount</th> *@
@*                             <th>Status</th> *@
@*                             <th>Action</th> *@
@*                         </tr> *@
@*                     </thead> *@
@*                     <tbody> *@
@*                         @foreach (var booking in Model.Bookings) *@
@*                         { *@
@*                             var package = Model.Packages.FirstOrDefault(p => p.Id == booking.TravelPackageId); *@
                           
@*                             <tr> *@
@*                                 <td>@(package != null ? package.Title : "N/A")</td> *@
@*                                 <td><img src="@(package != null ? package.Image : "default.jpg")" alt="Image" class="img-thumbnail" style="width: 80px; height: 80px;"></td> *@
                               
@*                                 <td>@booking.NumberOfTravelers</td> *@
@*                                 <td>@booking.BookingDate.ToString("dd-MMM-yyyy")</td> *@
@*                                 <td><strong>@booking.TotalPrice.ToString("C")</strong></td> *@
@*                                 <td class="@(booking.Status == "Confirmed" ? "text-success" : "text-danger")">@booking.Status</td> *@
@*                                 <td class="options"> *@
@*                                     <button class="btn btn-outline-danger btn-sm"><i class="icon-trash"></i></button> *@
@*                                     <button class="btn btn-outline-warning btn-sm"><i class="icon-ccw-2"></i></button> *@
@*                                 </td> *@
@*                             </tr> *@
@*                         } *@
@*                     </tbody> *@
@*                 </table> *@
@*             </div> *@
@*             <!-- End col --> *@
@*         </div> *@
@*         <!--End row --> *@
@*     </div> *@
@*     <!--End container --> *@
@* </main> *@


@using TravelAgency.Domain.Features.BookingFeatures
@model List<bookdata>


<section id="hero_2" class="background-image" data-background="url(../img/slides/beach1.jpg)">
    <div class="opacity-mask" data-opacity-mask="rgba(0, 0, 0, 0.6)">
        <div class="intro_title">
            <h1>Place your order</h1>
        </div>
    </div>
</section>

<main>
    <div class="container pt-3 pt-5">
        <div class="row">
            @if (Model.Count != 0)
            {
                <div>
                    <table class="table table-striped cart-list add_bottom_30">
                        <thead>
                            <tr>
                                <th>Travel Package Title</th>
                                <th>Image</th>
                                <th>No. of Travellers</th>
                                <th>Booking Date</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var booking in Model)
                            {
                                <tr>
                                    <td>@(booking.TravelPackage != null ? booking.TravelPackage.Title : "N/A")</td>
                                    <td>
                                        <img src="@(booking.TravelPackage != null ? booking.TravelPackage.Image : "default.jpg")" alt="Image" class="img-thumbnail" style="width: 80px; height: 80px;">
                                    </td>
                                    <td>@booking.NumberOfTravelers</td>
                                    <td>@booking.BookingDate.ToString("dd-MMM-yyyy")</td>
                                    <td><strong>@booking.TotalPrice.ToString("C")</strong></td>
                                    <td class="@(booking.Status == "Confirmed" ? "text-success" : "text-danger")">@booking.Status</td>
                                    <td>
                                        @if (booking.Status.Equals("Confirmed", StringComparison.OrdinalIgnoreCase))
                                        {
                                            <a href="@Url.Action("Payment", "Booking", new { bookingId = booking.Id })" class="btn btn-success" style="width: 100px;">
                                                Payment
                                            </a>
                                        }
                                        else
                                        {
                                            <button class="btn btn-secondary" style="width: 100px;" disabled>Payment</button>
                                        }
                                    </td>

                                    <td class="options">
                                        <button class="btn btn-outline-danger btn-sm"><i class="icon-trash"></i></button>
                                        
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div>
                    <h2 class="text-center text-danger">No Data Found!</h2>
                </div>
            }

        </div>
    </div>
</main>
